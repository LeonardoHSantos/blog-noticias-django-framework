{% extends 'base.html' %}
{% load static %}
{% block title %} Novo Post {% endblock %}

{% block content %}
<div class="container">
    <!-- Barra de Ferramentas -->
    <div class="sidebar">
        <h2>Ferramentas</h2>
        <ul>
            <li><button>
                <span>Gerar Texto com IA</span>
                <i class="fa-solid fa-brain"></i>
            </button></li>
        </ul>
    </div>
    
    <!-- Formulário de Post -->
    <div class="main-content">
        <h1>Criar Novo Post</h1>
        <form action="/submit-post" method="POST">
            <div class="form-group">
                <label for="title">Título do Post</label>
                <input type="text" id="title" name="title" required>
            </div>

            <div class="post-image">
                <img id="preview_image" class="" src="" alt="">
            </div>
            <div class="form-group">
                <label for="cover_image">Imagem</label>
                <input type="file" id="cover_image" name="cover_image" accept="image/*" required>
            </div>
            <div class="form-group">
                <label for="content">Conteúdo</label>
                <textarea id="content" name="content" rows="10" required></textarea>
            </div>
            <!-- <div class="form-group">
                <label for="category">Categoria</label>
                <select id="category" name="category">
                    <option value="tech">Tecnologia</option>
                    <option value="life">Ecônomia</option>
                    <option value="education">Política</option>
                </select>
            </div> -->
            <button type="submit">Publicar</button>
        </form>
    </div>
</div>


<script>
    function previewImagem(){
        // Verifica se o src da imagem está vazio
        const postImageDiv = document.getElementById("preview_image");

        if (postImageDiv.src != window.location.href) {
            postImageDiv.classList.add("active");
        } else {
            postImageDiv.classList.remove("active");
        }
    }
    window.onload = function() {
        previewImagem();
    };
</script>

<script>
    document.getElementById('cover_image').addEventListener('change', function (event) {
        const input = event.target;
        const previewImage = document.getElementById('preview_image');
        
        if (input.files && input.files[0]) {
            const reader = new FileReader();

            reader.onload = function (e) {
                previewImage.src = e.target.result; // Define o novo src da imagem
                document.getElementById("preview_image").classList.add("active");
            };

            reader.readAsDataURL(input.files[0]); // Lê o arquivo como DataURL
        }
    });
</script>
{% endblock %}